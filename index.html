<!DOCTYPE html>
<meta charset="UTF-8"> 

<html>
<script src="javascripts/jquery-2.2.0.min.js"></script>
<script type="text/javascript">
// $(document).ready(function(){
//     $('[expanding="True"]').click(function(){
//     	$('[state="hidden"]').hide();
//     	showTarget = "#"+$(this).attr("expandName");
//       $(showTarget).show(500);
//       // $(hideTarget).animate({width: 'toggle'});
//     });
// });
</script>
<head>
<link type="text/css" rel="stylesheet" href="stylesheets/jquery.qtip.css" />
<style type="text/css">
	html, body {
    background-color:#ffffff;
    margin:0 0 0 0;
    height:100%;
	}
	input.base{
		width:50px;
		height:50px;
		padding:0px;
		border:none;
		text-align: center;
	}
	input.tooltip{
		width:30px;
		height:30px;
		padding:0px;
		border:none;
		text-align: center;
		font-weight: bold;
	}
div.sidebar{
	width: 80px;
	height: 100vh;
	background: #F00;
  float:left;
	text-align:center;
}
div.attribute{
	width: 50px;
	height: 50px;
	display: table-cell;
	vertical-align: middle;
	text-align:center;
}
div.calculation{
	/*width: 300px;*/
	/*height: 50px;*/
	/*background: #F00;*/
	/*display: table-cell;*/
	vertical-align: middle;
	text-align:center;
}
div.attributeEx{
	width: 50px;
	height: 50px;
	display: table-cell;
	vertical-align: middle;
	text-align:center;
}
</style>
</head>
<body>

<form id="frm1">
		<div class="sidebar">
		Hello
		</div>
		<div style="display:inline-block">
		<div>
		<div class="attribute"><a>ST</a></div>
		<div class="attribute"><input class="base" type="text" name="stValue" value="10"></div>
		<div class="attribute"><input class="base" type="text" name="stCost" value="0" readonly></div>
			<div style="display: table-cell;" expanding="True">
				<div class="attribute"><a>HP</a></div>
				<div class="attribute"><input class="base" type="text" name="hpValue" value="10" readonly></div>
				<div class="attribute"><input class="base" type="text" name="hpCost" value="0" readonly></div>
			</div>
			<div class="calculation" id="hpExpand" state="hidden">HP=ST+<input class="tooltip" type="text" name="hpOffValue" value="0"></div>
		</div>
		<div>
		<div class="attribute"><a>DX</a></div>
		<div class="attribute"><input class="base" type="text" name="dxValue" value="10"></div>
		<div class="attribute"><input class="base" type="text" name="dxCost" value="0"></div>
		<div style="display: table-cell;" expanding="True">
		<div class="attribute"><a>Per</a></div>
		<div class="attribute"><input class="base" type="text" name="perValue" value="10"></div>
		<div class="attribute"><input class="base" type="text" name="perCost" value="0"></div>
		</div>
		<div class="calculation" id="perExpand" state="hidden">Per=IQ+<input class="tooltip" type="text" name="perOffValue" value="0"></div>
		</div>
		<div>
		<div class="attribute"><a>IQ</a></div>
		<div class="attribute"><input class="base" type="text" name="iqValue" value="10"></div>
		<div class="attribute"><input class="base" type="text" name="iqCost" value="0"></div>
		<div style="display: table-cell;" expanding="True">
		<div class="attribute"><a>Will</a></div>
		<div class="attribute"><input class="base" type="text" name="willValue" value="10"></div>
		<div class="attribute"><input class="base" type="text" name="willCost" value="0"></div>
		</div>
		<div class="calculation" id="willExpand" state="hidden">Will=IQ+<input class="tooltip" type="text" name="willOffValue" value="0"></div>
		</div>
		<div>
		<div class="attribute"><a>HT</a></div>
		<div class="attribute"><input class="base" type="text" name="htValue" value="10"></div>
		<div class="attribute"><input class="base" type="text" name="htCost" value="0"></div>
		<div style="display: table-cell;" expanding="True">
		<div class="attribute"><a>FP</a></div>
		<div class="attribute"><input class="base" type="text" name="fpValue" value="10"></div>
		<div class="attribute"><input class="base" type="text" name="fpCost" value="0"></div>
		</div>
		<div class="calculation" id="fpExpand" state="hidden">FP=HT+<input class="tooltip" type="text" name="fpOffValue"	value="0"></div>
		</div>
		<div>
		<div style="display: table-cell;" expanding="True">
		<div class="attribute"><a>BS</a></div>
		<div class="attribute"><input class="base" type="text" name="bsValue" value="10"></div>
		<div class="attribute"><input class="base" type="text" name="bsCost" value="0"></div>
		</div>
		<div class="calculation" state="hidden">BS=BS+<input class="tooltip" type="text" name="bsOffValue"	value="0"></div>
		<div style="display: table-cell;" expanding="True">
		<div class="attribute"><a>BM</a></div>
		<div class="attribute"><input class="base" type="text" name="bmValue" value="10"></div>
		<div class="attribute"><input class="base" type="text" name="bmCost" value="0"></div>
		</div>
		<div class="calculation" state="hidden">BM=BM+<input class="tooltip" type="text" name="bmOffValue"	value="0"></div>
		</div>
		<div>
		<div class="attribute"><a expanding="True" expandName="thrExpand">THR</a></div>
		<div class="attribute"><input class="base" type="text" name="thrValue" value="-"></div>
		<div class="attribute"></div>
		<div class="attribute"><a expanding="True" expandName="swingExpand">SWI</a></div>
		<div class="attribute"><input class="base" type="text" name="swiValue" value="-"></div>
		<div class="attribute"></div>
		</div>
		<div>
		<div class="attribute"><a expanding="True" expandName="BLExpand">BL</a></div>
		<div class="attribute"><input class="base" type="text" name="blValue" value="-"></div>
		</div>
	<!-- <div class="calculation" id="hpExpand" state="hidden">HP=ST+<input class="base" type="text" name="hpOffValue"	value="0"></div> -->
	<!-- <div class="calculation" id="perExpand" state="hidden">Per=IQ+<input class="base" type="text" name="perOffValue"	value="0"></div> -->
	
	
	<div class="calculation" id="bsExpand" state="hidden">BS=(DX+HT)/4+<input class="tooltip" type="text" name="bsOffValue"	value="0"></div>
	<div class="calculation" id="bmExpand" state="hidden">BM=Floor((DX+HT)/4)+<input class="tooltip" type="text" name="bmOffValue"	value="0"></div>
</div>
<!-- <button type="button" onclick="aFunction()">Click Me!</button> 	 -->
</form>
<script src="javascripts/jquery.qtip.js"></script>
</body>
<script src="../JSON/strChart.js"></script>
<script>
//JSON Convert
var a = {};

$('input').each(addAttr);
$('input').change(addAttr);
$.each(a, returnAttr);

function returnAttr(k, v){
	// console.log(k);
	$('[name="'+k+'"]').val(v);
	// console.log(v);
}

function addAttr(){
// window.alert("CHANGE!");
var inputName = $(this).attr('name');
var inputValue = this.value;
a[inputName] = inputValue;
calculateJson();
// console.log("change: "+ inputName +" | "+ inputValue);
}

// End of JSON Convert
function aFunction(){
	console.log($('[name="hpOffValue"]'));
	console.log($('[name="hpOffValue"]').val());
}
$('[expanding="True"]').each(function() {
    $(this).qtip({
        content: {text: $(this).next('div.calculation')},
        show: {solo: true,effect: function() {$(this).fadeTo(500, 1); }},
        hide: {event: 'click unfocus', inactive: 3000,effect: function() {$(this).fadeTo(500, 0); }},
        position: {my: 'left center', at: 'center right',viewport: $(window)}});
});

$('[state="hidden"]').hide();

function calculateJson() {
	a.stCost =		((a.stValue)-10)*10;
	a.dxCost =		((a.dxValue)-10)*20;
	a.iqCost =		((a.iqValue)-10)*20;
	a.htCost =		((a.htValue)-10)*10;
	a.hpValue =		parseInt(a.hpOffValue)+parseInt(a.stValue);
	a.perValue =	parseInt(a.perOffValue)+parseInt(a.iqValue);
	a.willValue =	parseInt(a.willOffValue)+parseInt(a.iqValue);
	a.fpValue =		parseInt(a.fpOffValue)+parseInt(a.htValue);
	a.bsValue =		parseFloat(a.bsOffValue)+((parseInt(a.dxValue)+parseInt(a.htValue))/4);
	a.bmValue =		parseFloat(a.bmOffValue)+Math.floor(((parseInt(a.dxValue)+parseInt(a.htValue))/4));
	a.hpCost =		a.hpOffValue*2;
	a.perCost =		a.perOffValue*5;
	a.willCost =	a.willOffValue*5;
	a.fpCost =		a.fpOffValue*3;
	a.bsCost =		a.bsOffValue*20;
	stLookup =		"st"+a.stValue;
	a.thrValue =	strChart[stLookup].thr;
	a.swiValue =	strChart[stLookup].swi;
	a.blValue =		roundToOne(((a.stValue*a.stValue)/5)*0.454);
	$.each(a, returnAttr);	
}


function calculateForm() {
	// var x = document.getElementById("frm1");
	// $('[name="stCost"]').val("["+(parseInt($('[name="stValue"]').val())-10)*10 + "]");
	// $('[name="dxCost"]').val("["+(parseInt($('[name="dxValue"]').val())-10)*20 + "]");
	// $('[name="iqCost"]').val("["+(parseInt($('[name="iqValue"]').val())-10)*20 + "]");
	// $('[name="htCost"]').val("["+(parseInt($('[name="htValue"]').val())-10)*10 + "]");
	// $('[name="hpValue"]').val((parseInt($('[name="hpOffValue"]').val())+parseInt($('[name="stValue"]').val())));
	// $('[name="hpCost"]').val("["+(parseInt($('[name="hpOffValue"]').val()))*2+"]");
	// $('[name="perValue"]').val((parseInt($('[name="perOffValue"]').val())+parseInt($('[name="iqValue"]').val())));
	// $('[name="perCost"]').val("["+(parseInt($('[name="perOffValue"]').val()))*5+"]");
	// $('[name="willValue"]').val((parseInt($('[name="willOffValue"]').val())+parseInt($('[name="iqValue"]').val())));
	// $('[name="willCost"]').val("["+(parseInt($('[name="willOffValue"]').val()))*5+"]");
	// $('[name="fpValue"]').val((parseInt($('[name="fpOffValue"]').val())+parseInt($('[name="htValue"]').val())));
	// $('[name="fpCost"]').val("["+(parseInt($('[name="fpOffValue"]').val()))*3+"]");
	// $('[name="bsValue"]').val((parseFloat($('[name="bsOffValue"]').val())+((parseFloat($('[name="htValue"]').val())+parseFloat($('[name="dxValue"]').val()))/4)));
	// $('[name="bsCost"]').val("["+(parseFloat($('[name="bsOffValue"]').val()))*20+"]");
	

	// x.stCost.value = "["+(parseInt(x.stValue.value)-10)*10 + "]";
	// x.dxCost.value = "["+(parseInt(x.dxValue.value)-10)*20 + "]";
	// x.iqCost.value = "["+(parseInt(x.iqValue.value)-10)*20 + "]";
	// x.htCost.value = "["+(parseInt(x.htValue.value)-10)*10 + "]";
	// x.hpValue.value = (parseInt(x.hpOffValue.value)+parseInt(x.stValue.value));
	// x.hpCost.value = "["+(parseInt(x.hpOffValue.value))*2+"]";
	// x.perValue.value = (parseInt(x.perOffValue.value)+parseInt(x.iqValue.value));
	// x.perCost.value = "["+(parseInt(x.perOffValue.value))*5+"]";
	// x.willValue.value = (parseInt(x.willOffValue.value)+parseInt(x.iqValue.value));
	// x.willCost.value = "["+(parseInt(x.willOffValue.value))*5+"]";
	// x.fpValue.value = (parseInt(x.fpOffValue.value)+parseInt(x.htValue.value));
	// x.fpCost.value = "["+(parseInt(x.fpOffValue.value))*3+"]";
	// x.bsValue.value = (parseFloat(x.bsOffValue.value)+((parseFloat(x.htValue.value)+parseFloat(x.dxValue.value))/4));
	// x.bsCost.value = "["+(parseFloat(x.bsOffValue.value))*20+"]";
}
function parseValue(o) {
	c = "[name='"+o.attr("target")+"']"
	var targetObject = $(c);
	var valueChange = o.val();
	targetObject.val(valueChange);

}
function roundToOne(num) {    
    return +(Math.round(num + "e+1")  + "e-1");
}

</script>

<<<<<<< HEAD
</html>
=======
</html>
>>>>>>> origin/gh-pages
